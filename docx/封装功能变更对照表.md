# 封装功能变更对照表

## 1. 组件系统统一

| 旧功能 | 新功能 | 变更类型 | 替换路径 |
|--------|--------|----------|----------|
| `components/ui/` 独立组件系统 | `components/semantic/` 语义化组件系统 | 统一替换 | `components/ui/index.ts` 从语义化组件重新导出 |
| `buttonVariants` | `useComponentStyle` | 移除 | 替换为 `useComponentStyle` 或 `sx` 函数 |
| `Card` 等UI组件 | `SemanticCard` 等语义化组件 | 统一命名 | 从 `components/semantic/` 导入或通过 `components/ui/` 重新导出 |

## 2. 样式工具函数统一

| 旧功能 | 新功能 | 变更类型 | 替换路径 |
|--------|--------|----------|----------|
| `s()` | `sx()` | 统一函数 | 使用 `sx()` 函数，`s()` 仍可用但已弃用 |
| 分散的样式类 | 语义化样式标记 | 功能扩展 | 使用 `sx(['text.textPrimary', 'bg.surface'])` 形式 |
| 独立的组件样式函数 | `useComponentStyle` | 统一管理 | 从 `@/themes/themeUtils` 导入 |

## 3. API 封装统一

| 旧功能 | 新功能 | 变更类型 | 替换路径 |
|--------|--------|----------|----------|
| 直接的 API 调用 | `apiClient` | 统一封装 | 从 `@/lib/api` 导入 `apiClient` 或 `apiService`（别名） |
| 分散的 API 函数 | `apiClient` 方法集合 | 集中管理 | 使用 `apiClient.get()`, `apiClient.post()` 等方法 |
| 旧的文件上传函数 | `apiClient.uploadFile` | 统一方法 | 使用 `apiClient.uploadFile()` 或特定业务方法 |

## 4. Composables 移动与扩展

| 旧功能 | 新功能 | 变更类型 | 替换路径 |
|--------|--------|----------|----------|
| `useStatusBar` | `useStatusBar` | 移动 | 从 `@/components/common/composables/useStatusBar` 导入 |
| `useCanvasTransform` | `useCanvasTransform` | 移动 | 从 `@/modules/canvas/composables/useCanvasTransform` 导入 |
| - | `useAIWorkflow` | 新增 | 从 `@/composables/useAIWorkflow` 导入 |
| - | `useAIProcess` | 新增 | 从 `@/composables/useAIProcess` 导入 |
| - | `useTaskWorkflow` | 新增 | 从 `@/modules/task/composables/useTaskWorkflow` 导入 |

## 5. 动画系统封装

| 旧功能 | 新功能 | 变更类型 | 替换路径 |
|--------|--------|----------|----------|
| 分散的动画类 | `Animations` 对象 | 统一管理 | 从 `@/lib/animations` 导入 `Animations` 对象 |
| - | 动画组件（`Animated`, `AnimatedContainer`） | 新增 | 从 `@/components/animation` 导入 |
| - | `EnterAnimation`/`ExitAnimation` | 新增 | 从 `@/lib/animations` 导入 |

## 6. 主题配置完善

| 旧功能 | 新功能 | 变更类型 | 替换路径 |
|--------|--------|----------|----------|
| 简单主题配置 | 完整主题配置 | 功能扩展 | 从 `@/themes/modernDarkTheme` 导入主题配置 |
| - | `ThemeContext` | 新增 | 从 `@/themes/ThemeContext` 导入 |
| - | 主题切换功能 | 新增 | 使用 `ThemeContext` 和主题切换组件 |

## 7. 类型系统统一

| 旧功能 | 新功能 | 变更类型 | 替换路径 |
|--------|--------|----------|----------|
| 分散的类型定义 | 统一类型文件 | 集中管理 | 从 `@/types` 导入统一类型 |
| - | 主题类型扩展 | 新增 | 从 `@/themes/types` 导入主题相关类型 |

## 8. 测试工具新增

| 旧功能 | 新功能 | 变更类型 | 替换路径 |
|--------|--------|----------|----------|
| 无测试工具 | `testing/helpers.tsx` | 新增 | 从 `@/testing/helpers` 导入测试辅助函数 |

## 9. 数据管理新增

| 旧功能 | 新功能 | 变更类型 | 替换路径 |
|--------|--------|----------|----------|
| 无状态管理 | `stores/` 目录 | 新增 | 从 `@/stores` 导入状态管理 |
| - | `useProject`/`useUser` 等 composables | 新增 | 从 `@/composables` 导入 |

## 10. 属性面板封装

| 旧功能 | 新功能 | 变更类型 | 替换路径 |
|--------|--------|----------|----------|
| 分散的属性面板 | `SemanticPropertyPanel` | 统一封装 | 从 `@/components/semantic/SemanticPropertyPanel` 导入 |
| 自定义面板样式 | `PropertyGroup`/`PropertyField` | 新增组件 | 从 `@/components/semantic/SemanticPropertyPanel` 导入 |
| 无统一面板样式 | 主题配置中的面板样式 | 新增 | 从 `@/themes/modernDarkTheme` 中的 `components.panel` 配置 |

## 替换建议

1. **组件使用**：优先从 `@/components/ui` 导入组件，以确保统一的组件接口
2. **样式使用**：使用 `sx()` 函数替代 `s()` 函数，支持语义化样式标记
3. **API 调用**：使用 `apiClient` 或 `apiService`（别名）统一调用 API
4. **Composables**：从正确的路径导入 composables，注意部分功能已移动位置
5. **动画效果**：使用 `Animations` 对象统一管理动画类名

## 验证方法

1. 运行 `npm run lint` 检查代码规范
2. 运行 `npm run typecheck` 检查类型错误
3. 运行 `npm run test` 执行单元测试
4. 手动测试各功能模块，确保封装功能正常工作
5. 检查浏览器控制台，确保无未捕获的错误

## 结论

通过以上变更，前端项目实现了更高度的封装和统一，提高了代码的可维护性和一致性。建议按照对照表逐步替换旧功能，确保所有模块都使用最新的封装机制。